<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>대출 상세</title>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div th:replace="fragments/header :: header"></div>

<div class="container mt-5" style="max-width: 700px;">
  <h2 class="mb-4 text-center">대출 상세</h2>

  <!-- 대출 정보 -->
  <div class="mb-4">
    <h4 class="mb-3">대출 정보</h4>
    <ul class="list-group">
      <li class="list-group-item">대출 ID: <span th:text="${loan.loan.id}"></span></li>
      <li class="list-group-item">대출일: <span th:text="${loan.loan.loanDate}"></span></li>
      <li class="list-group-item">
        반납일:
        <span th:if="${loan.loan.returnDate != null}" th:text="${loan.loan.returnDate}"></span>
        <span th:if="${loan.loan.returnDate == null}">미반납</span>
      </li>
      <li class="list-group-item">
        상태:
        <strong th:if="${loan.loan.returnDate == null}" class="text-danger">대출 중</strong>
        <strong th:if="${loan.loan.returnDate != null}" class="text-success">반납 완료</strong>
      </li>
    </ul>
  </div>

  <!-- 도서 정보 -->
  <div class="mb-4">
    <h4 class="mb-3">도서 정보</h4>
    <ul class="list-group">
      <li class="list-group-item">제목: <span th:text="${loan.book.title}"></span></li>
      <li class="list-group-item">저자: <span th:text="${loan.book.author}"></span></li>
      <li class="list-group-item">ISBN: <span th:text="${loan.book.isbn}"></span></li>
      <li class="list-group-item">출판사: <span th:text="${loan.book.publisher}"></span></li>
      <li class="list-group-item">재고: <span th:text="${loan.book.stock}"></span></li>
    </ul>
  </div>

  <!-- 회원 정보 -->
  <div class="mb-4">
    <h4 class="mb-3">회원 정보</h4>
    <ul class="list-group">
      <li class="list-group-item">이름: <span th:text="${loan.member.name}"></span></li>
      <li class="list-group-item">이메일: <span th:text="${loan.member.email}"></span></li>
      <li class="list-group-item">전화번호: <span th:text="${loan.member.phone}"></span></li>
      <li class="list-group-item">주소: <span th:text="${loan.member.address}"></span></li>
    </ul>
  </div>

  <!-- 반납/삭제 버튼 -->
  <div class="d-flex gap-3 mb-3">
    <form th:if="${loan.loan.returnDate == null}"
          th:action="@{'/loans/return/' + ${loan.loan.id}}" method="post">
      <button type="submit" class="btn btn-warning">반납</button>
    </form>

    <form th:if="${loan.loan.returnDate != null}"
          th:action="@{'/loans/delete/' + ${loan.loan.id}}" method="post"
          onsubmit="return confirm('정말 삭제하시겠습니까?')">
      <button type="submit" class="btn btn-danger">삭제</button>
    </form>
  </div>

  <div class="mb-4" th:if="${loan.loan.returnDate == null}">
    <small class="text-muted">※ 반납 후 삭제할 수 있습니다.</small>
  </div>

  <a th:href="@{/loans}" class="btn btn-secondary">목록으로</a>
</div>

<div th:replace="fragments/footer :: footer" class="mt-5"></div>

</body>
</html>


